"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var app = getApp();
var getapp = getApp();
var domain = getapp.globalData.domain;
Page({
    data: {
        truescroll: true, page: 1, user: "未登录"
    },
    onLoad: function () {
        this.getscroll();
        this.islogin();
    },
    scroll: null,
    getscroll: function () {
        this.scroll = this.selectComponent("#scroll");
        this.scroll.getdata(0, 0);
    },
    onReachBottom: function () {
        var page = this.data.page;
        page = page + 1;
        this.setData({
            page: page
        });
        if (this.data.truescroll) {
            this.scroll.getdata(page);
        }
    },
    islogin: function () {
        var _this = this;
        var gets = wx.getStorageSync("kc-cookie");
        var header = {};
        header["Cookie"] = gets;
        wx.request({
            url: domain + "/user/islogin",
            header: header,
            success: function (res) {
                _this.setData({ user: res.data.reg.name });
            }
        });
    }
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWluZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIm1pbmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFDQSxJQUFNLEdBQUcsR0FBRyxNQUFNLEVBQVUsQ0FBQTtBQUM1QixJQUFJLE1BQU0sR0FBUSxNQUFNLEVBQUUsQ0FBQTtBQUMxQixJQUFJLE1BQU0sR0FBVyxNQUFNLENBQUMsVUFBVSxDQUFDLE1BQU0sQ0FBQTtBQUM3QyxJQUFJLENBQUM7SUFDSCxJQUFJLEVBQUU7UUFDSixVQUFVLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxDQUFDLEVBQUMsSUFBSSxFQUFDLEtBQUs7S0FDckM7SUFDRCxNQUFNO1FBQ0osSUFBSSxDQUFDLFNBQVMsRUFBRSxDQUFBO1FBQ2hCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQTtJQUNoQixDQUFDO0lBQ0QsTUFBTSxFQUFFLElBQUk7SUFDWixTQUFTO1FBQ1AsSUFBSSxDQUFDLE1BQU0sR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQzlDLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUM1QixDQUFDO0lBQ0QsYUFBYSxFQUFiO1FBQ0UsSUFBSSxJQUFJLEdBQVEsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUE7UUFDOUIsSUFBSSxHQUFHLElBQUksR0FBRyxDQUFDLENBQUE7UUFDZixJQUFJLENBQUMsT0FBUSxDQUFDO1lBQ1osSUFBSSxFQUFFLElBQUk7U0FDWCxDQUFDLENBQUE7UUFDRixJQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxFQUFFO1lBQ3hCLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFBO1NBQzFCO0lBQ0gsQ0FBQztJQUNELE9BQU87UUFBUCxpQkFXQztRQVZDLElBQUksSUFBSSxHQUFRLEVBQUUsQ0FBQyxjQUFjLENBQUMsV0FBVyxDQUFDLENBQUE7UUFDOUMsSUFBSSxNQUFNLEdBQVEsRUFBRSxDQUFBO1FBQ3BCLE1BQU0sQ0FBQyxRQUFRLENBQUMsR0FBRyxJQUFJLENBQUE7UUFDdkIsRUFBRSxDQUFDLE9BQU8sQ0FBQztZQUNULEdBQUcsRUFBRSxNQUFNLEdBQUMsZUFBZTtZQUMzQixNQUFNLEVBQUUsTUFBTTtZQUNkLE9BQU8sRUFBRSxVQUFDLEdBQUc7Z0JBQ1gsS0FBSSxDQUFDLE9BQU8sQ0FBQyxFQUFDLElBQUksRUFBQyxHQUFHLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUMsQ0FBQyxDQUFBO1lBQ3hDLENBQUM7U0FDRixDQUFDLENBQUE7SUFDSixDQUFDO0NBQ0YsQ0FBQyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSU15QXBwIH0gZnJvbSAnLi4vLi4vYXBwJ1xyXG5jb25zdCBhcHAgPSBnZXRBcHA8SU15QXBwPigpXHJcbnZhciBnZXRhcHA6IGFueSA9IGdldEFwcCgpXHJcbnZhciBkb21haW46IHN0cmluZyA9IGdldGFwcC5nbG9iYWxEYXRhLmRvbWFpblxyXG5QYWdlKHtcclxuICBkYXRhOiB7XHJcbiAgICB0cnVlc2Nyb2xsOiB0cnVlLCBwYWdlOiAxLHVzZXI6XCLmnKrnmbvlvZVcIlxyXG4gIH0sXHJcbiAgb25Mb2FkKCkge1xyXG4gICAgdGhpcy5nZXRzY3JvbGwoKVxyXG4gICAgdGhpcy5pc2xvZ2luKClcclxuICB9LFxyXG4gIHNjcm9sbDogbnVsbCxcclxuICBnZXRzY3JvbGwoKSB7XHJcbiAgICB0aGlzLnNjcm9sbCA9IHRoaXMuc2VsZWN0Q29tcG9uZW50KFwiI3Njcm9sbFwiKTtcclxuICAgIHRoaXMuc2Nyb2xsLmdldGRhdGEoMCwgMCk7XHJcbiAgfSxcclxuICBvblJlYWNoQm90dG9tKCk6IHZvaWQge1xyXG4gICAgdmFyIHBhZ2U6IGFueSA9IHRoaXMuZGF0YS5wYWdlXHJcbiAgICBwYWdlID0gcGFnZSArIDFcclxuICAgIHRoaXMuc2V0RGF0YSEoe1xyXG4gICAgICBwYWdlOiBwYWdlXHJcbiAgICB9KVxyXG4gICAgaWYgKHRoaXMuZGF0YS50cnVlc2Nyb2xsKSB7XHJcbiAgICAgIHRoaXMuc2Nyb2xsLmdldGRhdGEocGFnZSlcclxuICAgIH1cclxuICB9LFxyXG4gIGlzbG9naW4oKSB7XHJcbiAgICB2YXIgZ2V0czogYW55ID0gd3guZ2V0U3RvcmFnZVN5bmMoXCJrYy1jb29raWVcIilcclxuICAgIHZhciBoZWFkZXI6IGFueSA9IHt9XHJcbiAgICBoZWFkZXJbXCJDb29raWVcIl0gPSBnZXRzXHJcbiAgICB3eC5yZXF1ZXN0KHtcclxuICAgICAgdXJsOiBkb21haW4rXCIvdXNlci9pc2xvZ2luXCIsXHJcbiAgICAgIGhlYWRlcjogaGVhZGVyLFxyXG4gICAgICBzdWNjZXNzOiAocmVzKSA9PiB7XHJcbiAgICAgICAgdGhpcy5zZXREYXRhKHt1c2VyOnJlcy5kYXRhLnJlZy5uYW1lfSlcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcbn0pXHJcbiJdfQ==